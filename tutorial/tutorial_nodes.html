



<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Node &mdash; Geomapi 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" href="../_static/style.css" type="text/css" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8d563738"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MeshNode" href="tutorial_meshnodes.html" />
    <link rel="prev" title="Ontology" href="../information/ontology.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/geomapi_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Information:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../information/getting%20started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../information/nodes.html">Nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../information/ontology.html">Ontology</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorial:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Node</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#node-creation">Node Creation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-empty-node">Create empty Node</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-with-subject">Create with Subject</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-with-resource">Create with Resource</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-with-graph-path">Create with graph(Path)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ontology-link">Ontology link</a></li>
<li class="toctree-l4"><a class="reference internal" href="#graph-path-with-subject">Graph(Path) with Subject</a></li>
<li class="toctree-l4"><a class="reference internal" href="#graph-path-without-subject">Graph(Path) without subject</a></li>
<li class="toctree-l4"><a class="reference internal" href="#set-the-properties-from-the-graph">Set the properties from the Graph</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#node-serialization">Node Serialization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#node-to-graph">Node to Graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="#save-to-graph">Save to Graph</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#node-transformation">Node Transformation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#node-visualisation">Node Visualisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#further-reading">Further reading</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_meshnodes.html">MeshNode</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_pointcloudnodes.html">PointCloudNode</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_bimnodes.html">BIMNode</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_linesetnodes.html">LineSetNode</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_imagenodes.html">ImageNode</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_orthonodes.html">OrthoNode</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_panonodes.html">PanoNode</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_setnodes.html">SetNode</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_node_selection.html">Node selection</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Test Cases:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testcases/alignmenttools.html">Alignment Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testcases/combinationtools.html">Combination Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testcases/site_progress.html">Construction site progress</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testcases/validationtools.html">Validation Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testcases/volume_calculation.html">Volume calculation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../geomapi/geomapi.nodes.html">geomapi.nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geomapi/geomapi.utils.html">geomapi.utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geomapi/geomapi.tools.html">geomapi.tools</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/environment%20creation.html">User environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/environment%20creation.html#developer-environment">Developer environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/packaging.html">Packaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/ontology%20creation.html">Ontology Creation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/testcase%20creation.html">Testcase Creation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contribution</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../team/team.html">Team</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Geomapi</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Node</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorial/tutorial_nodes.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="node">
<h1>Node<a class="headerlink" href="#node" title="Link to this heading"></a></h1>
<p>The Node class in Geomapi is the abstract metadata class from which all other classes inherit. While this node should not be frequently used (unless to govern unknown geospatial data), and has limited capabilities, it governs the basic properties and RDF Graph interaction.</p>
<p><a class="reference external" href="https://rdflib.readthedocs.io/">https://rdflib.readthedocs.io/</a></p>
<p>As such, the Node class incorporates all functionalities to read and write metadata to RDF Graphs, and format it approprietly to be used in geomatics analyses.</p>
<p>The code below shows how to create a abstract Node class works and how it interacts with RDF Graphs.</p>
<p>First the geomapi and external packages are imported</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#IMPORT PACKAGES</span>
<span class="kn">from</span> <span class="nn">rdflib</span> <span class="kn">import</span> <span class="n">Graph</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1">#IMPORT MODULES</span>
<span class="kn">from</span> <span class="nn">context</span> <span class="kn">import</span> <span class="n">geomapi</span> <span class="c1">#context import for documentation only</span>
<span class="kn">from</span> <span class="nn">geomapi.nodes</span> <span class="kn">import</span> <span class="n">Node</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Jupyter environment detected. Enabling Open3D WebVisualizer.
[Open3D INFO] WebRTC GUI backend enabled.
[Open3D INFO] WebRTCWindowSystem: HTTP handshake server disabled.
</pre></div>
</div>
</div>
</div>
<section id="node-creation">
<h2>Node Creation<a class="headerlink" href="#node-creation" title="Link to this heading"></a></h2>
<p>A Node can be created using any number of stated parameters. All these parameters correspond to a property which is input protected.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Node</span><span class="p">(</span> <span class="n">subject</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>             <span class="c1"># (URIRef, optional) : A subject to use as identifier for the Node.</span>
      <span class="n">graph</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>               <span class="c1"># (Graph, optional) : An RDF Graph to parse.</span>
      <span class="n">graphPath</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>           <span class="c1"># (Path, optional) : The path of an RDF Graph to parse.</span>
      <span class="n">name</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>                <span class="c1"># (str, optional) : A name of the Node.</span>
      <span class="n">path</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>                <span class="c1"># (Path, optional) : A filepath to a resource.</span>
      <span class="n">timestamp</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>           <span class="c1"># (str, optional) : Timestamp for the node.</span>
      <span class="n">resource</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>            <span class="c1"># (optional) : Resource associated with the node.</span>
      <span class="n">cartesianTransform</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># (np.ndarray, optional) : The (4x4) transformation matrix.</span>
      <span class="n">orientedBoundingBox</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="c1"># (o3d.geometry.OrientedBoundingBox, optional) : The oriented bounding box of the node.</span>
      <span class="n">convexHull</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>          <span class="c1"># (o3d.geometry.TriangleMesh, optional) : The convex hull of the node.</span>
      <span class="n">loadResource</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>       <span class="c1"># Load the resource at initialization?</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="create-empty-node">
<h3>Create empty Node<a class="headerlink" href="#create-empty-node" title="Link to this heading"></a></h3>
<p>Node classes can be initialized without any inputs.</p>
<p>In this case, most properties get a standard value based on the given parameters at initialization. These ensure every node has compatibility with our functions. This set of properties will always have a value, no matter what combination of parameters are given at initialization.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create an empty node</span>
<span class="n">node</span><span class="o">=</span><span class="n">Node</span><span class="p">()</span>

<span class="c1"># Print the standard property values</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;subject:&quot;</span><span class="p">,</span><span class="n">node</span><span class="o">.</span><span class="n">subject</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;name:&quot;</span><span class="p">,</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;timestamp:&quot;</span><span class="p">,</span><span class="n">node</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;cartesianTransform:&quot;</span><span class="p">,</span><span class="n">node</span><span class="o">.</span><span class="n">cartesianTransform</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;convexHull:&quot;</span><span class="p">,</span><span class="n">node</span><span class="o">.</span><span class="n">convexHull</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;orientedBoundingBox:&quot;</span><span class="p">,</span><span class="n">node</span><span class="o">.</span><span class="n">orientedBoundingBox</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>subject: http://3cad1a0d-2f0c-11f0-8ee8-e8c8298c9966
name: 3cad1a0d-2f0c-11f0-8ee8-e8c8298c9966
timestamp: 2025-05-12T10:36:45
cartesianTransform: [[1. 0. 0. 0.]
 [0. 1. 0. 0.]
 [0. 0. 1. 0.]
 [0. 0. 0. 1.]]
convexHull: TriangleMesh with 8 points and 12 triangles.
orientedBoundingBox: OrientedBoundingBox: center: (0, 0, 0), extent: 1, 1, 1)
</pre></div>
</div>
</div>
</div>
</section>
<section id="create-with-subject">
<h3>Create with Subject<a class="headerlink" href="#create-with-subject" title="Link to this heading"></a></h3>
<p>The <a class="reference external" href="https://rdflib.readthedocs.io/en/stable/rdf_terms.html">subject</a> serves as the key identifier for the Node with <a class="reference external" href="https://rdflib.readthedocs.io/en/stable/intro_to_graphs.html">RDF Graphs</a> and thus is restricted from using characters that can break its serialisation.
In contrast, the <a class="reference external" href="https://geomatics.pages.gitlab.kuleuven.be/research-projects/geomapi/geomapi/geomapi.nodes.node.html">name</a> property is a string without any conditions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="n">subject</span> <span class="o">=</span> <span class="s1">&#39;[this&lt;has$to^change]&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">subject</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>http://_this_has_to_change_
_this_has_to_change_
</pre></div>
</div>
</div>
</div>
<p>But, it is important to note that the name is always derived from the subject if no name is given and vise versa.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;[this&lt;has$to^change]&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">subject</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[this&lt;has$to^change]
http://_this_has_to_change_
</pre></div>
</div>
</div>
</div>
<p>The type of these subjects is a <a class="reference external" href="https://rdflib.readthedocs.io/en/stable/rdf_terms.html#uriref">URIRef</a> which is compatible with any standardised Graph Navigation. Notice that both online (http:///) and local (file:///) subjects can be used with Geomapi (although the focus is more in offline processing).</p>
</section>
<section id="create-with-resource">
<h3>Create with Resource<a class="headerlink" href="#create-with-resource" title="Link to this heading"></a></h3>
<p>When creating a Node with a resource, it can be done either directly with the resource, or with the path to the resource.</p>
<p>A resource can be a big piece of data, this is why it is not always wanted to load the whole resource at initialization. This is why the <code class="docutils literal notranslate"><span class="pre">loadResource</span></code> parameter is default to <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
<p>For more info on specific resources, see the corresponding Node type</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;../../..\tests\testfiles\mesh\railway.obj&quot;</span><span class="p">,</span> <span class="n">loadResource</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">node</span><span class="o">.</span><span class="n">load_resource</span><span class="p">()</span> <span class="c1"># Use specialized node fo each type of resource.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Resource not loaded, but path is defined, call `load_resource()` to access it.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
<section id="create-with-graph-path">
<h3>Create with graph(Path)<a class="headerlink" href="#create-with-graph-path" title="Link to this heading"></a></h3>
<p>Every node class can be initialized from a graph or the path to the graph. A graph is defined as an RDF file containing a list of subjects, predicates and values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example graph</span>
<span class="n">graphPath</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;../../../tests\testfiles\graphs\baseNode.ttl&quot;</span>
<span class="n">graph</span><span class="o">=</span><span class="n">Graph</span><span class="p">()</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">graphPath</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">graph</span><span class="o">.</span><span class="n">serialize</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>@prefix dcterms: &lt;http://purl.org/dc/terms/&gt; .
@prefix geomapi: &lt;https://w3id.org/geomapi#&gt; .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .

&lt;http://newNode1&gt; a geomapi:Node ;
    rdfs:label &quot;newNode1&quot;^^xsd:string ;
    dcterms:created &quot;2023-11-23T10:08:01&quot;^^xsd:dateTime ;
    geomapi:cartesianTransform &quot;&quot;&quot;[[-1 0 0 1]
 [0 -1 0 1]
 [0 0 -1 1]
 [0 0 0 1]]&quot;&quot;&quot;^^geomapi:matrix ;
    geomapi:path &quot;../mesh/parking.obj&quot;^^xsd:string .

&lt;http://newNode2&gt; a geomapi:Node ;
    rdfs:label &quot;newNode2&quot;^^xsd:string ;
    dcterms:created &quot;2023-11-23T10:08:02&quot;^^xsd:dateTime ;
    geomapi:cartesianTransform &quot;&quot;&quot;[[1 0 0 0]
 [0 1 0 0]
 [0 0 1 0]
 [0 0 0 1]]&quot;&quot;&quot;^^geomapi:matrix ;
    geomapi:path &quot;../mesh/parking.obj&quot;^^xsd:string .
</pre></div>
</div>
</div>
</div>
<section id="ontology-link">
<h4>Ontology link<a class="headerlink" href="#ontology-link" title="Link to this heading"></a></h4>
<p>You may notice that the predicates in the graph do not all match the properties of the Node.
All metadata properties have a link to the the ontology. Other properties like <code class="docutils literal notranslate"><span class="pre">resource</span></code> and <code class="docutils literal notranslate"><span class="pre">graph</span></code> are not present in the graph, since thy do not represent metadata, rather actual binary data and are to large and inefficient to store in a graph.</p>
<p>Some properties have different names when they are defined in the graph:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>python name</p></th>
<th class="head"><p>predicate</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">subject</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rdf:type</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rdfs:label</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">geomapi:path</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">timestamp</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dcterms:created</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cartesianTransform</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">geomapi:cartesianTransform</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">orientedBoundingBox</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">geomapi:orientedBoundingBox</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">convexHull</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">geomapi:convexHull</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="graph-path-with-subject">
<h4>Graph(Path) with Subject<a class="headerlink" href="#graph-path-with-subject" title="Link to this heading"></a></h4>
<p>Since the graph contains multiple subjects, it is advised to always add the subject to the parameters.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">graph</span><span class="o">=</span><span class="n">graph</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="s2">&quot;newNode2&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;subject:&quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">subject</span><span class="p">)</span>

<span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">graphPath</span><span class="o">=</span><span class="n">graphPath</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="s2">&quot;newNode2&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;subject:&quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">subject</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Resource not loaded, but path is defined, call `load_resource()` to access it.
subject: http://newNode2
Resource not loaded, but path is defined, call `load_resource()` to access it.
subject: http://newNode2
</pre></div>
</div>
</div>
</div>
</section>
<section id="graph-path-without-subject">
<h4>Graph(Path) without subject<a class="headerlink" href="#graph-path-without-subject" title="Link to this heading"></a></h4>
<p>When no subject is given, but multiple subjects are present in the graph, it picks the first one after serialization.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">graph</span><span class="o">=</span><span class="n">graph</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;subject:&quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">subject</span><span class="p">)</span>

<span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">graphPath</span><span class="o">=</span><span class="n">graphPath</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;subject:&quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">subject</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Resource not loaded, but path is defined, call `load_resource()` to access it.
subject: http://newNode1
Resource not loaded, but path is defined, call `load_resource()` to access it.
subject: http://newNode2
</pre></div>
</div>
</div>
</div>
</section>
<section id="set-the-properties-from-the-graph">
<h4>Set the properties from the Graph<a class="headerlink" href="#set-the-properties-from-the-graph" title="Link to this heading"></a></h4>
<p>Upon initialisation from a graph or graphPath, the graph’s triples are assigned to the instance’s properties.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="n">graph</span><span class="o">=</span><span class="n">graph</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;subject:&quot;</span><span class="p">,</span><span class="n">node</span><span class="o">.</span><span class="n">subject</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;name:&quot;</span><span class="p">,</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;timestamp:&quot;</span><span class="p">,</span><span class="n">node</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;cartesianTransform:&quot;</span><span class="p">,</span><span class="n">node</span><span class="o">.</span><span class="n">cartesianTransform</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Resource not loaded, but path is defined, call `load_resource()` to access it.
subject: http://newNode1
name: newNode1
timestamp: 2023-11-23T10:08:01
cartesianTransform: [[-1.  0.  0.  1.]
 [ 0. -1.  0.  1.]
 [ 0.  0. -1.  1.]
 [ 0.  0.  0.  1.]]
</pre></div>
</div>
</div>
</div>
<p><strong>NOTE</strong>: Paths are stored relative to the graphPath so graph files and files can be moved without breaking the serialization. Moreover, when a graphPath is present, it is used to reconstruct the absolute paths wihtin the node.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="n">graph</span><span class="o">=</span><span class="n">graph</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">path</span><span class="p">)</span> <span class="c1"># -&gt; absolute path can not be reconstructed, Uses cwd for location</span>

<span class="n">node</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="n">graphPath</span><span class="o">=</span><span class="n">graphPath</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Resource not loaded, but path is defined, call `load_resource()` to access it.
C:\Users\jelle\Documents\DoctoraatLocal\geomapi\docs\source\mesh\parking.obj
Resource not loaded, but path is defined, call `load_resource()` to access it.
C:\Users\jelle\Documents\DoctoraatLocal\geomapi\tests\testfiles\mesh\parking.obj
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="node-serialization">
<h2>Node Serialization<a class="headerlink" href="#node-serialization" title="Link to this heading"></a></h2>
<p>When a Node is created in can be serialized back to an RDF graph.</p>
<section id="node-to-graph">
<h3>Node to Graph<a class="headerlink" href="#node-to-graph" title="Link to this heading"></a></h3>
<p>When generating the graph from a Node, all the initial properties are re-serialized. When you define new variables to the class, you need to add them to the <code class="docutils literal notranslate"><span class="pre">serializeAttributes</span></code> parameter in the <code class="docutils literal notranslate"><span class="pre">get_graph()</span></code> function.</p>
<p><strong>NOTE</strong>: Actual data is not serialized incl. resources (point clouds, meshes, etc.), the graphPath, etc. These would not fit with semantic web technology concepts and can be hundreds of gigabytes in filesize.  <br> <br>
Instead, resources should be stored separately in their respective file formats while the graphs govern their metadata.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="s1">&#39;myNode&#39;</span><span class="p">,</span>
            <span class="n">myAttr</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
            <span class="n">myAttr2</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> 
            <span class="n">myAttr3</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">get_graph</span><span class="p">(</span><span class="n">serializeAttributes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;myAttr&quot;</span><span class="p">,</span> <span class="s2">&quot;myAttr2&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">serialize</span><span class="p">())</span> <span class="c1"># add the custom attributes to the list</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The euler angles are derived from the rotation matrix, please note that this representation has a number of disadvantages
@prefix dcterms: &lt;http://purl.org/dc/terms/&gt; .
@prefix geomapi: &lt;https://w3id.org/geomapi#&gt; .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .

&lt;http://myNode&gt; a geomapi:Node ;
    rdfs:label &quot;myNode&quot;^^xsd:string ;
    dcterms:created &quot;2025-05-12T15:36:42&quot;^^xsd:dateTime ;
    geomapi:cartesianTransform &quot;&quot;&quot;[[1. 0. 0. 0.]
 [0. 1. 0. 0.]
 [0. 0. 1. 0.]
 [0. 0. 0. 1.]]&quot;&quot;&quot;^^geomapi:matrix ;
    geomapi:convexHull &quot;&quot;&quot;[[-0.5 -0.5 -0.5]
 [ 0.5 -0.5 -0.5]
 [-0.5 -0.5  0.5]
 [ 0.5 -0.5  0.5]
 [-0.5  0.5 -0.5]
 [ 0.5  0.5 -0.5]
 [-0.5  0.5  0.5]
 [ 0.5  0.5  0.5]]&quot;&quot;&quot;^^geomapi:matrix ;
    geomapi:myAttr 5e-01 ;
    geomapi:myAttr2 5 ;
    geomapi:orientedBoundingBox &quot;[0. 0. 0. 1. 1. 1. 0. 0. 0.]&quot;^^geomapi:matrix .
</pre></div>
</div>
</div>
</div>
<p><a class="reference external" href="https://rdflib.readthedocs.io/en/stable/rdf_terms.html#common-xsd-datatypes">XSD</a> datatypes are used to serialize the data. <strong>str</strong> is used if no type is recognized.</p>
</section>
<section id="save-to-graph">
<h3>Save to Graph<a class="headerlink" href="#save-to-graph" title="Link to this heading"></a></h3>
<p>Storing one or more nodes in a graph on drive is an extension of the to_graph() function.
<br></p>
<p>Just add a new graphPath or use the existing one, and set save==True</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="s1">&#39;myNode&#39;</span><span class="p">,</span>
            <span class="n">myAttr</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
            <span class="n">myAttr2</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> 
            <span class="n">myAttr3</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]))</span>

<span class="n">newGraphPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;../../../tests/testfiles/resources&quot;</span><span class="p">,</span><span class="s1">&#39;myGraph.ttl&#39;</span><span class="p">)</span>
<span class="n">node</span><span class="o">.</span><span class="n">get_graph</span><span class="p">(</span><span class="n">graphPath</span> <span class="o">=</span> <span class="n">newGraphPath</span><span class="p">,</span> <span class="n">serializeAttributes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;myAttr&quot;</span><span class="p">,</span> <span class="s2">&quot;myAttr2&quot;</span><span class="p">,</span> <span class="s2">&quot;myAttr3&quot;</span><span class="p">],</span> <span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">newNode</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="n">graphPath</span><span class="o">=</span><span class="n">newGraphPath</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">serialize</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The euler angles are derived from the rotation matrix, please note that this representation has a number of disadvantages
@prefix dcterms: &lt;http://purl.org/dc/terms/&gt; .
@prefix geomapi: &lt;https://w3id.org/geomapi#&gt; .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .

&lt;http://myNode&gt; a geomapi:Node ;
    rdfs:label &quot;myNode&quot;^^xsd:string ;
    dcterms:created &quot;2025-05-13T14:17:24&quot;^^xsd:dateTime ;
    geomapi:cartesianTransform &quot;&quot;&quot;[[1. 0. 0. 0.]
 [0. 1. 0. 0.]
 [0. 0. 1. 0.]
 [0. 0. 0. 1.]]&quot;&quot;&quot;^^geomapi:matrix ;
    geomapi:convexHull &quot;&quot;&quot;[[-0.5 -0.5 -0.5]
 [ 0.5 -0.5 -0.5]
 [-0.5 -0.5  0.5]
 [ 0.5 -0.5  0.5]
 [-0.5  0.5 -0.5]
 [ 0.5  0.5 -0.5]
 [-0.5  0.5  0.5]
 [ 0.5  0.5  0.5]]&quot;&quot;&quot;^^geomapi:matrix ;
    geomapi:myAttr 5e-01 ;
    geomapi:myAttr2 5 ;
    geomapi:myAttr3 &quot;[1 2 3]&quot; ;
    geomapi:orientedBoundingBox &quot;[0. 0. 0. 1. 1. 1. 0. 0. 0.]&quot;^^geomapi:matrix .
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="node-transformation">
<h2>Node Transformation<a class="headerlink" href="#node-transformation" title="Link to this heading"></a></h2>
<p>Since every nod has a cartesian transform, it can be transformed using the <code class="docutils literal notranslate"><span class="pre">node.transform()</span></code> function.</p>
<p>The transformation also updates the <code class="docutils literal notranslate"><span class="pre">convexHull</span></code> and <code class="docutils literal notranslate"><span class="pre">orientedBoundingBox</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">cartesianTransform</span><span class="p">)</span>
<span class="n">transformation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]])</span>
<span class="n">node</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">transformation</span><span class="o">=</span><span class="n">transformation</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;applying transformation: (-1)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">cartesianTransform</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">()</span>
<span class="n">rotation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">90</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span> <span class="c1">#eulers in degrees</span>
<span class="n">node</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;applying rotation: (90,0,0)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">cartesianTransform</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">()</span>
<span class="n">translation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="n">node</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">translation</span><span class="o">=</span><span class="n">translation</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;applying translation: (1,2,3)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">cartesianTransform</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[1. 0. 0. 0.]
 [0. 1. 0. 0.]
 [0. 0. 1. 0.]
 [0. 0. 0. 1.]]
applying transformation: (-1)
[[0. 0. 1. 0.]
 [0. 1. 0. 0.]
 [1. 0. 0. 0.]
 [0. 0. 0. 1.]] 

applying rotation: (90,0,0)
[[ 1.000000e+00  0.000000e+00  0.000000e+00  0.000000e+00]
 [ 0.000000e+00  6.123234e-17 -1.000000e+00  0.000000e+00]
 [ 0.000000e+00  1.000000e+00  6.123234e-17  0.000000e+00]
 [ 0.000000e+00  0.000000e+00  0.000000e+00  1.000000e+00]] 

applying translation: (1,2,3)
[[1. 0. 0. 1.]
 [0. 1. 0. 2.]
 [0. 0. 1. 3.]
 [0. 0. 0. 1.]]
</pre></div>
</div>
</div>
</div>
</section>
<section id="node-visualisation">
<h2>Node Visualisation<a class="headerlink" href="#node-visualisation" title="Link to this heading"></a></h2>
<p>When a Node has a resource, the <code class="docutils literal notranslate"><span class="pre">show()</span></code> function displays the resource using the relevant visualizer.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c1"># The standard node has no resource to display</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="further-reading">
<h2>Further reading<a class="headerlink" href="#further-reading" title="Link to this heading"></a></h2>
<p>Please refer to the full <a class="reference internal" href="../geomapi/geomapi.nodes.node.html"><span class="std std-doc">API documentation</span></a> of the Node class for more details about the functionality</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../information/ontology.html" class="btn btn-neutral float-left" title="Ontology" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tutorial_meshnodes.html" class="btn btn-neutral float-right" title="MeshNode" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Bassier M., De Geyter S., De Winter H., Vermandere J. @ Geomatics KU Leuven.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>